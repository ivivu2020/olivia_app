(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{Tl8F:function(n,e,l){"use strict";l.r(e);var t=l("8Y7J");class r{}var o=l("pMnS"),a=l("oBZk"),i=l("ZZ/e"),u=l("SVse"),s=l("mrSG"),d=l("D5/n"),c=l("KGI4"),g=l("9Ap/"),p=l("Tcs0");class f{constructor(n,e,l,t,r,o,a,i,u){this.platform=n,this.navCtrl=e,this.toastCtrl=l,this.zone=t,this.storage=r,this.alertCtrl=o,this.modalCtrl=a,this.valueGlobal=i,this.gf=u,this.isShowConfirm=!1;let s=this;s.loadUserInfo(),s.fetuserRewardData(),s.storage.get("userRewardData").then(n=>{n?s.userRewardData=n:s.fetuserRewardData()}),u.googleAnalytion("userreward","load","")}ngOnInit(){}ionViewDidEnter(){this.GetUserInfo()}GetUserInfo(){var n=this;n.storage.get("auth_token").then(e=>{if(e){var l={method:"GET",url:c.a.urls.baseUrl.urlMobile+"/api/Dashboard/GetUserInfo",timeout:1e4,maxAttempts:5,retryDelay:2e3,headers:{"cache-control":"no-cache","content-type":"application/json",authorization:"Bearer "+e}};d(l,function(e,t,r){if(200!=t.statusCode){var o={page:"roomdetailreview",func:"GetUserInfo",message:t.statusMessage,content:t.body,type:"warning",param:JSON.stringify(l)};c.a.writeErrorLog(o,t)}e?(e.page="roomdetailreview",e.func="GetUserInfo",e.param=JSON.stringify(l),c.a.writeErrorLog(e,t)):r&&n.zone.run(()=>{n.loadUserInfo()})})}})}ionViewWillLeave(){this.zone.run(()=>{clearInterval(this.intervalID)})}loadUserInfo(){var n=this;n.storage.get("auth_token").then(e=>{if(e){var l={method:"GET",url:c.a.urls.baseUrl.urlMobile+"/api/Dashboard/GetUserInfo",timeout:1e4,maxAttempts:5,retryDelay:2e3,headers:{"cache-control":"no-cache","content-type":"application/json",authorization:"Bearer "+e}};d(l,function(e,t,r){if(200!=t.statusCode){var o={page:"userreward",func:"loadUserInfo",message:t.statusMessage,content:t.body,type:"warning",param:JSON.stringify(l)};c.a.writeErrorLog(o,t)}if(e)throw e.page="userreward",e.func="loadUserInfo",e.param=JSON.stringify(l),c.a.writeErrorLog(e,t),new Error(e);if(r){var a=JSON.parse(r);n.zone.run(()=>{n.userInfoData=a})}else{if(n.isShowConfirm)return;n.showConfirm(),n.isShowConfirm=!0}})}})}fetuserRewardData(){var n=this;n.storage.get("auth_token").then(e=>{if(e){var l={method:"GET",url:c.a.urls.baseUrl.urlMobile+"/api/Dashboard/GetRewardItems",timeout:1e4,maxAttempts:5,retryDelay:2e3,headers:{"cache-control":"no-cache","content-type":"application/json",authorization:"Bearer "+e}};d(l,function(e,t,r){if(200!=t.statusCode){var o={page:"userreward",func:"fetuserRewardData",message:t.statusMessage,content:t.body,type:"warning",param:JSON.stringify(l)};c.a.writeErrorLog(o,t)}if(e)throw e.page="userreward",e.func="fetuserRewardData",e.param=JSON.stringify(l),c.a.writeErrorLog(e,t),new Error(e);if(r){var a=JSON.parse(r);n.zone.run(()=>{n.userRewardData=a}),n.storage.set("userRewardData",a)}else{if(n.isShowConfirm)return;n.showConfirm(),n.isShowConfirm=!0}})}})}goback(){this.navCtrl.back()}showConfirm(){return s.__awaiter(this,void 0,void 0,function*(){(yield this.alertCtrl.create({message:"Phi\xean \u0111\u0103ng nh\u1eadp h\u1ebft h\u1ea1n. Xin vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\xe0y.",buttons:[{text:"\u0110\u0103ng nh\u1eadp",role:"OK",handler:()=>{this.storage.remove("auth_token"),this.storage.remove("email"),this.storage.remove("username"),this.storage.remove("jti"),this.storage.remove("userInfoData"),this.storage.remove("userRewardData"),this.navCtrl.navigateForward("/login")}},{text:"\u0110\u1ec3 sau",handler:()=>{this.storage.remove("auth_token"),this.storage.remove("email"),this.storage.remove("username"),this.storage.remove("jti"),this.storage.remove("userInfoData"),this.storage.remove("userRewardData"),this.navCtrl.back()}}]})).present()})}exchangeGift(n){this.userInfoData&&(this.userInfoData.point>=n.unitPoint?(this.gf.setParams({record:n,userinfo:this.userInfoData},"exchangegift"),this.navCtrl.navigateBack("/exchangegift")):this.presentToast("R\u1ea5t ti\u1ebfc, qu\xfd kh\xe1ch ch\u01b0a \u0111\u1ee7 \u0111i\u1ec3m \u0111\u1ec3 \u0111\u1ed5i qu\xe0 t\u1eb7ng n\xe0y!"))}presentToast(n){return s.__awaiter(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:n,duration:2e3,position:"top"})).present()})}refreshToken(){var n=this;n.storage.get("auth_token").then(e=>{if(e){var l={method:"GET",url:c.a.urls.baseUrl.urlMobile+"/api/Account/reloadTokenClaims",headers:{"cache-control":"no-cache","content-type":"application/json-patch+json",authorization:"Bearer "+e}};d(l,function(e,t,r){if(200!=t.statusCode){var o={page:"userprofile",func:"refreshToken",message:t.statusMessage,content:t.body,type:"warning",param:JSON.stringify(l)};c.a.writeErrorLog(o,t)}if(e)e.page="userprofile",e.func="refreshToken",e.param=JSON.stringify(l),c.a.writeErrorLog(e,t);else{var a=JSON.parse(r);n.zone.run(()=>{n.storage.remove("auth_token"),n.storage.set("auth_token",a.auth_token),n.loadUserInfo()})}})}})}}var h=l("xgBC"),m=t["\u0275crt"]({encapsulation:0,styles:[[".header-title[_ngcontent-%COMP%]{padding-top:12px;text-align:center;font-size:20px;right:6%;font-weight:700}.header-arrow[_ngcontent-%COMP%]{margin:3px 11px}.userreward-content[_ngcontent-%COMP%]{padding:16px}.div-wrapimg[_ngcontent-%COMP%]{position:relative;height:50px;width:50px;overflow:hidden;border-radius:25px}.img-user-avatar[_ngcontent-%COMP%]{left:0;bottom:0;-o-object-fit:contain;object-fit:contain;max-width:initial;background-color:#dedede;width:50px}.user-name[_ngcontent-%COMP%]{font-weight:500;margin-top:10px}.user-point[_ngcontent-%COMP%]{font-size:12px;color:#26bed6}.div-wrapimg-reward[_ngcontent-%COMP%]{position:relative;height:156px;overflow:hidden;border-radius:5px}.item-reward-img[_ngcontent-%COMP%]{height:100%;margin-left:-18%;max-width:150%}.col-left[_ngcontent-%COMP%]{padding-right:8px;border-right:1px solid rgba(0,0,0,.08)}.col-right[_ngcontent-%COMP%]{padding-left:8px}.div-span-0[_ngcontent-%COMP%], .div-span-2[_ngcontent-%COMP%], .div-span-4[_ngcontent-%COMP%]{height:24px;margin-right:8px;padding-top:4px}.div-span-1[_ngcontent-%COMP%], .div-span-3[_ngcontent-%COMP%], .div-span-5[_ngcontent-%COMP%]{height:24px;margin-left:8px;padding-top:4px}.btn-reward[_ngcontent-%COMP%]{border-color:#bdbdbd;color:#bdbdbd;background:#fff;width:98%;height:48px;text-transform:none;font-size:17px;font-weight:400}.btn-reward[_ngcontent-%COMP%]:hover{border-color:#f79221!important;color:#fff!important;background:#f79221!important;width:98%;height:48px;text-transform:none;font-size:17px;font-weight:400}.div-button-reward[_ngcontent-%COMP%]{padding-top:16px}.div-item-reward[_ngcontent-%COMP%]{width:50%}.reward-title[_ngcontent-%COMP%]{font-weight:500;padding-top:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reward-pp[_ngcontent-%COMP%]{padding-top:4px;font-size:11px;color:#4f4f4f}.item-reward-point[_ngcontent-%COMP%]{text-align:right;padding:0;color:#26bed6}.item-reward-price[_ngcontent-%COMP%]{text-align:left;padding:0}.div-span-item-reward[_ngcontent-%COMP%]{height:4px;background-color:#26bed6;margin-top:8px;border-radius:5px}.userreward-content[_ngcontent-%COMP%]   .row-item-reward[_ngcontent-%COMP%] > div.div-item-reward[_ngcontent-%COMP%]:lastchild   div.col-left[_ngcontent-%COMP%]{border:none}"]],data:{}});function w(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,11,"ion-row",[],null,null,null,a.Ab,a.F)),t["\u0275did"](1,49152,null,0,i.IonRow,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](2,0,null,0,3,"ion-col",[["col-2",""]],null,null,null,a.db,a.i)),t["\u0275did"](3,49152,null,0,i.IonCol,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](4,0,null,0,1,"div",[["class","div-wrapimg"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,0,"img",[["class","img-user-avatar"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,0,5,"ion-col",[["class","weather-img"],["col-10",""]],null,null,null,a.db,a.i)),t["\u0275did"](7,49152,null,0,i.IonCol,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](8,0,null,0,1,"div",[["class","user-name"]],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,["",""])),(n()(),t["\u0275eld"](10,0,null,0,1,"div",[["class","user-point"]],null,null,null,null,null)),(n()(),t["\u0275ted"](11,null,[""," point \u2192"]))],null,function(n,e){var l=e.component;n(e,5,0,t["\u0275inlineInterpolate"](1,"",l.userInfoData.avatar,"")),n(e,9,0,l.userInfoData.fullname),n(e,11,0,l.userInfoData.point)})}function v(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"div",[["class","div-item-reward"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,20,"div",[],null,null,null,null,null)),t["\u0275did"](2,278528,null,0,u.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"div",[["class","div-wrapimg-reward"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,0,"img",[["class","item-reward-img"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,1,"div",[["class","reward-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,["",""])),(n()(),t["\u0275eld"](7,0,null,null,10,"div",[["class","reward-pp"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,9,"ion-row",[],null,null,null,a.Ab,a.F)),t["\u0275did"](9,49152,null,0,i.IonRow,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](10,0,null,0,3,"ion-col",[["class","item-reward-price"],["col-7",""]],null,null,null,a.db,a.i)),t["\u0275did"](11,49152,null,0,i.IonCol,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275ted"](12,0,["Tr\u1ecb gi\xe1 ","\u0111"])),t["\u0275ppd"](13,2),(n()(),t["\u0275eld"](14,0,null,0,3,"ion-col",[["class","item-reward-point"],["col-5",""]],null,null,null,a.db,a.i)),t["\u0275did"](15,49152,null,0,i.IonCol,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275ted"](16,0,[""," \u0111i\u1ec3m"])),t["\u0275ppd"](17,2),(n()(),t["\u0275eld"](18,0,null,null,0,"div",[["class","div-span-item-reward"]],null,null,null,null,null)),(n()(),t["\u0275eld"](19,0,null,null,2,"div",[["class","div-button-reward"]],null,null,null,null,null)),(n()(),t["\u0275eld"](20,0,null,null,1,"button",[["class","button btn-reward"],["ion-button",""],["outline",""],["round",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.exchangeGift(n.context.$implicit)&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["\u0110\u1ed5i qu\xe0"])),(n()(),t["\u0275eld"](22,0,null,null,1,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),t["\u0275eld"](23,0,null,null,0,"hr",[],null,null,null,null,null))],function(n,e){n(e,2,0,e.context.index%2?"col-right":"col-left")},function(n,e){n(e,4,0,t["\u0275inlineInterpolate"](1,"",e.context.$implicit.avatar,"")),n(e,6,0,e.context.$implicit.title);var l=t["\u0275unv"](e,12,0,n(e,13,0,t["\u0275nov"](e.parent,0),e.context.$implicit.price,"1.0"));n(e,12,0,l);var r=t["\u0275unv"](e,16,0,n(e,17,0,t["\u0275nov"](e.parent,0),e.context.$implicit.unitPoint,"1.0"));n(e,16,0,r),n(e,22,0,t["\u0275inlineInterpolate"](1,"div-span-",e.context.index,""))})}function C(n){return t["\u0275vid"](0,[t["\u0275pid"](0,u.DecimalPipe,[t.LOCALE_ID]),(n()(),t["\u0275eld"](1,0,null,null,10,"ion-header",[],null,null,null,a.ib,a.n)),t["\u0275did"](2,49152,null,0,i.IonHeader,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](3,0,null,0,8,"ion-row",[],null,null,null,a.Ab,a.F)),t["\u0275did"](4,49152,null,0,i.IonRow,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](5,0,null,0,2,"ion-col",[["class","header-arrow"],["col-1",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.goback()&&t),t},a.db,a.i)),t["\u0275did"](6,49152,null,0,i.IonCol,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](7,0,null,0,0,"img",[["src","./assets/imgs/ios-arrow-round-back.svg"],["style","height: 48px; padding: 8px;margin-top: 0px;margin-left:-14px"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,0,3,"ion-col",[["class","header-title"]],null,null,null,a.db,a.i)),t["\u0275did"](9,49152,null,0,i.IonCol,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](10,0,null,0,1,"label",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["\u01afu \u0111\xe3i cho b\u1ea1n"])),(n()(),t["\u0275eld"](12,0,null,null,8,"ion-content",[],null,null,null,a.eb,a.j)),t["\u0275did"](13,49152,null,0,i.IonContent,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](14,0,null,0,6,"div",[["class","userreward-content"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](16,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](17,0,null,null,3,"ion-row",[["class","row-item-reward"]],null,null,null,a.Ab,a.F)),t["\u0275did"](18,49152,null,0,i.IonRow,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275and"](16777216,null,0,1,null,v)),t["\u0275did"](20,278528,null,0,u.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,16,0,l.userInfoData),n(e,20,0,l.userRewardData)},null)}function b(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-userreward",[],null,null,null,C,m)),t["\u0275did"](1,114688,null,0,f,[i.Platform,i.NavController,i.ToastController,t.NgZone,h.b,i.AlertController,i.ModalController,g.f,p.b],null,null)],function(n,e){n(e,1,0)},null)}var _=t["\u0275ccf"]("app-userreward",f,b,{},{},[]),x=l("s7LF"),R=l("iInd");l.d(e,"UserRewardPageModuleNgFactory",function(){return D});var D=t["\u0275cmf"](r,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,_]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,u.NgLocalization,u.NgLocaleLocalization,[t.LOCALE_ID,[2,u["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,x["\u0275angular_packages_forms_forms_j"],x["\u0275angular_packages_forms_forms_j"],[]),t["\u0275mpd"](4608,i.AngularDelegate,i.AngularDelegate,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,i.ModalController,i.ModalController,[i.AngularDelegate,t.ComponentFactoryResolver,t.Injector,u.DOCUMENT]),t["\u0275mpd"](4608,i.PopoverController,i.PopoverController,[i.AngularDelegate,t.ComponentFactoryResolver,t.Injector,u.DOCUMENT]),t["\u0275mpd"](1073742336,u.CommonModule,u.CommonModule,[]),t["\u0275mpd"](1073742336,x["\u0275angular_packages_forms_forms_bc"],x["\u0275angular_packages_forms_forms_bc"],[]),t["\u0275mpd"](1073742336,x.FormsModule,x.FormsModule,[]),t["\u0275mpd"](1073742336,i.IonicModule,i.IonicModule,[]),t["\u0275mpd"](1073742336,R.p,R.p,[[2,R.v],[2,R.n]]),t["\u0275mpd"](1073742336,r,r,[]),t["\u0275mpd"](1024,R.l,function(){return[[{path:"",component:f}]]},[])])})}}]);