(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{D3dO:function(e,n,l){"use strict";l.r(n);var o=l("8Y7J"),t=l("mrSG"),a=l("YCZo"),r=l("9Ap/"),s=l("Tcs0"),u=l("ZZ/e"),i=l("D5/n"),d=l("KGI4"),c=l("BOF4"),p=l.n(c);class g{constructor(e,n,l,o,t,a,r,s){this.zone=e,this.fcm=n,this.gf=l,this.storage=o,this.searchhotel=t,this.navCtrl=a,this.valueGlobal=r,this.toastCtrl=s,this.passwordIcon="eye-off",this.passwordType="password"}ngOnInit(){}saveChange(){var e=this;this.pass?this.pass.length>=6?i({method:"POST",url:d.a.urls.baseUrl.urlMobile+"/api/account/SetForgotPassMobile",headers:{"cache-control":"no-cache","content-type":"application/json"},body:{EmailOrPhone:this.valueGlobal.phone,Token:e.valueGlobal.token,Password:this.pass,Password2:this.pass,ResetToken:this.valueGlobal.resettoken,UserId:this.valueGlobal.userid},json:!0},function(n,l,o){if(n)throw new Error(n);if(o.result){if(o.auth_token){var t=p()(o.auth_token);e.refreshTokenTimer=t.refreshTokenTimer,e.storage.set("email",t.email),e.storage.set("auth_token",o.auth_token),e.storage.set("username",t.fullname),e.storage.set("phone",t.phone);var a,r=e.hasWhiteSpace(t.fullname);if(e.storage.remove("deviceToken"),e.fcm.getToken().then(n=>{e.deviceToken=n,e.storage.set("deviceToken",n)}),r){var s=t.fullname.trim();if((s=t.fullname.split(" ")).length>2){let e="";for(let n=1;n<s.length;n++)e+=1==n?s[n]:" "+s[n];a={ho:s[0],ten:e,phone:t.phone}}else s.length>1?a={ho:s[0],ten:s[1],phone:t.phone}:1==s.length&&(a={ho:s[0],ten:"",phone:t.phone});e.storage.set("infocus",a)}else e.storage.set("infocus",a={ho:"",ten:"",phone:t.phone,fullname:""});Array.isArray(t.jti)?e.storage.set("jti",t.jti[0]):e.storage.set("jti",t.jti),e.deviceToken&&e.gf.pushTokenAndMemberID(o.auth_token,e.deviceToken,e.appversion),e.storage.remove("blogtripdefault"),e.storage.remove("regionnamesuggest"),e.storage.remove("listtopdealdefault"),e.valueGlobal.countNotifi=0,e.gf.setParams(!0,"resetBlogTrips"),e.storage.set("point",t.point),e.searchhotel.rootPage="login",e.countdownRefreshToken(),e.valueGlobal.logingoback?e.navCtrl.navigateBack([e.valueGlobal.logingoback]):e.navCtrl.navigateRoot("/")}}else alert(o.msg)}):this.presentToastpass():alert("M\u1eadt kh\u1ea9u kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}countdownRefreshToken(){var e=parseInt(this.refreshTokenTimer);this.countdownTimer(e)}countdownTimer(e){e>=0&&(this.valueGlobal.interval=setInterval(()=>{--e<0&&(clearInterval(this.valueGlobal.interval),this.reloadToken())},1e3))}reloadToken(){this.refreshToken()}refreshToken(){var e=this;e.storage.get("auth_token").then(n=>{if(n){var l={method:"GET",url:d.a.urls.baseUrl.urlMobile+"/api/Account/reloadTokenClaims",headers:{"cache-control":"no-cache","content-type":"application/json",authorization:"Bearer "+n}};i(l,function(n,o,t){if(200!=o.statusCode){var a={page:"roompaymentdoneean",func:"refreshToken",message:o.statusMessage,content:o.body,type:"warning",param:JSON.stringify(l)};d.a.writeErrorLog(a,o)}if(n)n.page="roompaymentdoneean",n.func="refreshToken",n.param=JSON.stringify(l),d.a.writeErrorLog(n,o);else{var r=JSON.parse(t);r.auth_token&&(e.storage.remove("auth_token"),e.storage.set("auth_token",r.auth_token),e.countdownRefreshToken())}})}})}hasWhiteSpace(e){return e.indexOf(" ")>=0}presentToastpass(){return t.__awaiter(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"M\u1eadt kh\u1ea9u ph\u1ea3i \xedt nh\u1ea5t 6 k\xfd t\u1ef1",duration:3e3,position:"top"})).present()})}goback(){this.navCtrl.back()}hideShowPassword(){this.zone.run(()=>{this.passwordType="text"===this.passwordType?"password":"text",this.passwordIcon="eye-off"===this.passwordIcon?"eye":"eye-off"})}}class h{}var m=l("pMnS"),f=l("oBZk"),v=l("s7LF"),k=l("xgBC"),C=o["\u0275crt"]({encapsulation:0,styles:[[".btn-changepass[_ngcontent-%COMP%]{border-color:#f79221!important;color:#fff!important;background:#f79221!important;margin:0;width:100%}"]],data:{}});function b(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,11,"ion-header",[],null,null,null,f.ib,f.n)),o["\u0275did"](1,49152,null,0,u.IonHeader,[o.ChangeDetectorRef,o.ElementRef],null,null),(e()(),o["\u0275eld"](2,0,null,0,9,"ion-row",[],null,null,null,f.Ab,f.F)),o["\u0275did"](3,49152,null,0,u.IonRow,[o.ChangeDetectorRef,o.ElementRef],null,null),(e()(),o["\u0275eld"](4,0,null,0,7,"ion-col",[["style","text-align: center;height: 48px;margin-bottom: 8px;"]],null,null,null,f.db,f.i)),o["\u0275did"](5,49152,null,0,u.IonCol,[o.ChangeDetectorRef,o.ElementRef],null,null),(e()(),o["\u0275eld"](6,0,null,0,5,"div",[["style","align-self: center"]],null,null,null,null,null)),(e()(),o["\u0275eld"](7,0,null,null,1,"div",[["style","position: absolute;height: 48px;width: 48px;align-self: center;"]],null,[[null,"click"]],function(e,n,l){var o=!0;return"click"===n&&(o=!1!==e.component.goback()&&o),o},null,null)),(e()(),o["\u0275eld"](8,0,null,null,0,"img",[["src","./assets/imgs/ios-arrow-round-back.svg"],["style","height: 48px; padding: 8px;margin-top: 0px;margin-left:-14px; top:2px"]],null,null,null,null,null)),(e()(),o["\u0275eld"](9,0,null,null,2,"div",[["style","padding-top: 10px;font-size: 20px;font-weight: bold;"]],null,null,null,null,null)),(e()(),o["\u0275eld"](10,0,null,null,1,"label",[["class","text-title"]],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,["\u0110\u1ed5i m\u1eadt kh\u1ea9u"])),(e()(),o["\u0275eld"](12,0,null,null,18,"ion-content",[["padding",""]],null,null,null,f.eb,f.j)),o["\u0275did"](13,49152,null,0,u.IonContent,[o.ChangeDetectorRef,o.ElementRef],null,null),(e()(),o["\u0275eld"](14,0,null,0,13,"ion-item",[["style","--padding-start: 0px"]],null,null,null,f.rb,f.s)),o["\u0275did"](15,49152,null,0,u.IonItem,[o.ChangeDetectorRef,o.ElementRef],null,null),(e()(),o["\u0275eld"](16,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,f.sb,f.x)),o["\u0275did"](17,49152,null,0,u.IonLabel,[o.ChangeDetectorRef,o.ElementRef],{position:[0,"position"]},null),(e()(),o["\u0275ted"](-1,0,["M\u1eadt kh\u1ea9u"])),(e()(),o["\u0275eld"](19,0,null,0,6,"ion-input",[["class","text-color"],["clearOnEdit","false"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(e,n,l){var t=!0,a=e.component;return"ionBlur"===n&&(t=!1!==o["\u0275nov"](e,20)._handleBlurEvent()&&t),"ionChange"===n&&(t=!1!==o["\u0275nov"](e,20)._handleInputEvent(l.target.value)&&t),"ngModelChange"===n&&(t=!1!==(a.pass=l)&&t),t},f.mb,f.r)),o["\u0275did"](20,16384,null,0,u.TextValueAccessor,[o.ElementRef],null,null),o["\u0275prd"](1024,null,v.NG_VALUE_ACCESSOR,function(e){return[e]},[u.TextValueAccessor]),o["\u0275did"](22,671744,null,0,v.NgModel,[[8,null],[8,null],[8,null],[6,v.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,v.NgControl,null,[v.NgModel]),o["\u0275did"](24,16384,null,0,v.NgControlStatus,[[4,v.NgControl]],null,null),o["\u0275did"](25,49152,null,0,u.IonInput,[o.ChangeDetectorRef,o.ElementRef],{clearOnEdit:[0,"clearOnEdit"],type:[1,"type"]},null),(e()(),o["\u0275eld"](26,0,null,0,1,"ion-icon",[["class","passwordIcon"],["slot","end"],["style","margin-top: 33px;"]],null,[[null,"click"]],function(e,n,l){var o=!0;return"click"===n&&(o=!1!==e.component.hideShowPassword()&&o),o},f.jb,f.o)),o["\u0275did"](27,49152,null,0,u.IonIcon,[o.ChangeDetectorRef,o.ElementRef],{name:[0,"name"]},null),(e()(),o["\u0275eld"](28,0,null,0,2,"div",[["style","margin-top: 30px;"]],null,null,null,null,null)),(e()(),o["\u0275eld"](29,0,null,null,1,"button",[["class","button btn-changepass"],["ion-button",""],["outline",""],["round",""]],null,[[null,"click"]],function(e,n,l){var o=!0;return"click"===n&&(o=!1!==e.component.saveChange()&&o),o},null,null)),(e()(),o["\u0275ted"](-1,null,["\u0110\u1ed5i m\u1eadt kh\u1ea9u"]))],function(e,n){var l=n.component;e(n,17,0,"floating"),e(n,22,0,l.pass),e(n,25,0,"false",l.passwordType),e(n,27,0,l.passwordIcon)},function(e,n){e(n,19,0,o["\u0275nov"](n,24).ngClassUntouched,o["\u0275nov"](n,24).ngClassTouched,o["\u0275nov"](n,24).ngClassPristine,o["\u0275nov"](n,24).ngClassDirty,o["\u0275nov"](n,24).ngClassValid,o["\u0275nov"](n,24).ngClassInvalid,o["\u0275nov"](n,24).ngClassPending)})}function T(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,1,"app-forgotpasschange",[],null,null,null,b,C)),o["\u0275did"](1,114688,null,0,g,[o.NgZone,a.a,s.b,k.b,r.e,u.NavController,r.f,u.ToastController],null,null)],function(e,n){e(n,1,0)},null)}var w=o["\u0275ccf"]("app-forgotpasschange",g,T,{},{},[]),_=l("SVse"),y=l("iInd");l.d(n,"ForgotpasschangePageModuleNgFactory",function(){return R});var R=o["\u0275cmf"](h,[],function(e){return o["\u0275mod"]([o["\u0275mpd"](512,o.ComponentFactoryResolver,o["\u0275CodegenComponentFactoryResolver"],[[8,[m.a,w]],[3,o.ComponentFactoryResolver],o.NgModuleRef]),o["\u0275mpd"](4608,_.NgLocalization,_.NgLocaleLocalization,[o.LOCALE_ID,[2,_["\u0275angular_packages_common_common_a"]]]),o["\u0275mpd"](4608,v["\u0275angular_packages_forms_forms_j"],v["\u0275angular_packages_forms_forms_j"],[]),o["\u0275mpd"](4608,u.AngularDelegate,u.AngularDelegate,[o.NgZone,o.ApplicationRef]),o["\u0275mpd"](4608,u.ModalController,u.ModalController,[u.AngularDelegate,o.ComponentFactoryResolver,o.Injector,_.DOCUMENT]),o["\u0275mpd"](4608,u.PopoverController,u.PopoverController,[u.AngularDelegate,o.ComponentFactoryResolver,o.Injector,_.DOCUMENT]),o["\u0275mpd"](1073742336,_.CommonModule,_.CommonModule,[]),o["\u0275mpd"](1073742336,v["\u0275angular_packages_forms_forms_bc"],v["\u0275angular_packages_forms_forms_bc"],[]),o["\u0275mpd"](1073742336,v.FormsModule,v.FormsModule,[]),o["\u0275mpd"](1073742336,u.IonicModule,u.IonicModule,[]),o["\u0275mpd"](1073742336,y.p,y.p,[[2,y.v],[2,y.n]]),o["\u0275mpd"](1073742336,h,h,[]),o["\u0275mpd"](1024,y.l,function(){return[[{path:"",component:g}]]},[])])})}}]);