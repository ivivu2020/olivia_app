(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{ZybX:function(n,l,e){"use strict";e.r(l);var t=e("8Y7J");class o{}var a=e("pMnS"),r=e("s7LF"),u=e("oBZk"),s=e("ZZ/e"),i=e("SVse"),d=e("mrSG"),p=e("D5/n"),g=e("KGI4"),c=e("Tcs0"),m=e("9Ap/"),h=e("EVdn");class f{constructor(n,l,e,t,o,a,r,u,s,i,d){this.navCtrl=n,this.toastCtrl=l,this.zone=e,this.storage=t,this.alertCtrl=o,this.formBuilder=a,this.actionsheetCtrl=r,this.platform=u,this.valueGlobal=s,this.gf=i,this.activeRoute=d,this.haspassword="",this.changepass=!1,this.strwarning="",this.strwarningoldpass="",this.inputtype="password",this.inputtypenew="password"}ngOnInit(){}goback(){this.navCtrl.back()}ionViewWillEnter(){var n=this;n.storage.get("userInfoData").then(l=>{l&&n.zone.run(()=>{n.bindFormGroup(l)})}),h("#oldpassword").children("button").click(l=>n.clickedElement(l)),n.gf.setActivatedTab(5)}clickedElement(n){}ionViewDidEnter(){}ionViewWillLeave(){this.zone.run(()=>{clearInterval(this.intervalID)})}checkHasPassword(){var n=this;n.storage.get("auth_token").then(l=>{if(l){var e={method:"GET",url:g.a.urls.baseUrl.urlMobile+"/api/Dashboard/CheckHasPassword",headers:{"cache-control":"no-cache","content-type":"application/json-patch+json",authorization:"Bearer "+l}};p.timeout=6e4,p(e,function(l,t,o){if(200!=t.statusCode){var a={page:"userprofile",func:"checkHasPassword",message:t.statusMessage,content:t.body,type:"warning",param:JSON.stringify(e)};g.a.writeErrorLog(a,t)}if(l)l.page="userprofile",l.func="checkHasPassword",l.param=JSON.stringify(e),g.a.writeErrorLog(l,t);else if(o){var r=JSON.parse(o);n.zone.run(()=>{n.haspassword=r.hasPassword})}})}})}refreshToken(){var n=this;n.storage.get("auth_token").then(l=>{if(l){var e={method:"GET",url:g.a.urls.baseUrl.urlMobile+"/api/Account/reloadTokenClaims",headers:{"cache-control":"no-cache","content-type":"application/json",authorization:"Bearer "+l}};p(e,function(l,t,o){if(200!=t.statusCode){var a={page:"userprofile",func:"refreshToken",message:t.statusMessage,content:t.body,type:"warning",param:JSON.stringify(e)};g.a.writeErrorLog(a,t)}if(l)l.page="userprofile",l.func="refreshToken",l.param=JSON.stringify(e),g.a.writeErrorLog(l,t);else{var r=JSON.parse(o);n.zone.run(()=>{n.storage.remove("auth_token"),n.storage.set("auth_token",r.auth_token)})}})}})}bindFormGroup(n){var l=this;l.email=n.email,l.phone=n.phone,l.name=n.fullname,l.userProfileData=l.formBuilder.group({oldpassword:["",r.Validators.compose([r.Validators.required,r.Validators.minLength(6)])],newpassword:["",r.Validators.compose([r.Validators.required,r.Validators.minLength(6)])]})}saveChange(){var n,l=this;l.userProfileData.value.oldpassword?l.userProfileData.value.newpassword?l.userProfileData.value.oldpassword&&l.userProfileData.value.oldpassword.length<6||l.userProfileData.value.newpassword&&l.userProfileData.value.newpassword.length<6?l.presentToast("M\u1eadt kh\u1ea9u ph\u1ea3i l\u1edbn h\u01a1n 6 k\xfd t\u1ef1"):(n={userInfo:{email:l.email,phone:l.phone,fullname:l.name,passCheckbox:!0,oldPassword:l.userProfileData.value.oldpassword,newPassword1:l.userProfileData.value.newpassword,newPassword2:l.userProfileData.value.newpassword}},l.storage.get("auth_token").then(e=>{if(e){var t={method:"POST",url:g.a.urls.baseUrl.urlMobile+"/api/Dashboard/ChangeUserInfo",timeout:1e4,maxAttempts:5,retryDelay:2e3,headers:{"cache-control":"no-cache","content-type":"application/json-patch+json",authorization:"Bearer "+e},body:JSON.stringify(n)};p.timeout=6e4,p(t,function(n,e,o){if(400==e.statusCode){var a=JSON.parse(o);l.strwarning=a.msg,l.presentToast(l.strwarning)}if(200!=e.statusCode){var r={page:"userprofile",func:"saveChange",message:e.statusMessage,content:e.body,type:"warning",param:JSON.stringify(t)};g.a.writeErrorLog(r,e)}n?(n.page="userprofile",n.func="saveChange",n.param=JSON.stringify(t),g.a.writeErrorLog(n,e)):(a=JSON.parse(o)).result&&(l.presentToast("\u0110\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng."),l.goback())})}})):l.presentToast("M\u1eadt kh\u1ea9u m\u1edbi kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"):l.presentToast("M\u1eadt kh\u1ea9u c\u0169 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")}presentToast(n){return d.__awaiter(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:n,duration:2e3,position:"top"})).present()})}changetype(n){this.zone.run(()=>{1==n?this.inputtype=this.inputtype&&"password"==this.inputtype?"text":"password":2==n&&(this.inputtypenew=this.inputtypenew&&"password"==this.inputtypenew?"text":"password")})}}var v=e("xgBC"),C=e("iInd"),w=t["\u0275crt"]({encapsulation:0,styles:[[".img-show-oldpassword[_ngcontent-%COMP%]{position:absolute;right:0;top:43px;padding:16px 0;width:30px;height:45px;margin-right:20px;border-bottom:1px solid #cdcdcd}.img-show-newpassword[_ngcontent-%COMP%]{position:absolute;right:0;top:111px;padding:16px 0;width:30px;height:45px;margin-right:20px;border-bottom:1px solid #cdcdcd}.btn-changepass[_ngcontent-%COMP%]{border-color:#f79221!important;color:#fff!important;background:#f79221!important;width:91%;margin:16px}.ico-eye[_ngcontent-%COMP%]{width:28px;height:33px;border-bottom:1px solid #ccc}"]],data:{}});function b(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[["src","./assets/imgs/ic_eye.svg"]],null,null,null,null,null))],null,null)}function y(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[["src","./assets/imgs/ic_eyeoff.svg"]],null,null,null,null,null))],null,null)}function _(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[["src","./assets/imgs/ic_eye.svg"]],null,null,null,null,null))],null,null)}function k(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[["src","./assets/imgs/ic_eyeoff.svg"]],null,null,null,null,null))],null,null)}function I(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,38,"form",[["novalidate",""],["style","margin-top: 20px"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,e){var o=!0,a=n.component;return"submit"===l&&(o=!1!==t["\u0275nov"](n,2).onSubmit(e)&&o),"reset"===l&&(o=!1!==t["\u0275nov"](n,2).onReset()&&o),"submit"===l&&(o=!1!==a.saveChange()&&o),o},null,null)),t["\u0275did"](1,16384,null,0,r["\u0275angular_packages_forms_forms_bh"],[],null,null),t["\u0275did"](2,540672,null,0,r.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,r.ControlContainer,null,[r.FormGroupDirective]),t["\u0275did"](4,16384,null,0,r.NgControlStatusGroup,[[4,r.ControlContainer]],null,null),(n()(),t["\u0275eld"](5,0,null,null,11,"ion-item",[["style","background-color: initial;width:88%"]],null,null,null,u.rb,u.s)),t["\u0275did"](6,49152,null,0,s.IonItem,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](7,0,null,0,2,"ion-label",[["position","floating"],["style","font-size:14px"]],null,null,null,u.sb,u.x)),t["\u0275did"](8,49152,null,0,s.IonLabel,[t.ChangeDetectorRef,t.ElementRef],{position:[0,"position"]},null),(n()(),t["\u0275ted"](-1,0,["M\u1eadt kh\u1ea9u c\u0169"])),(n()(),t["\u0275eld"](10,0,null,0,6,"ion-input",[["clearInput",""],["formControlName","oldpassword"],["id","oldpassword"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0;return"ionBlur"===l&&(o=!1!==t["\u0275nov"](n,11)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t["\u0275nov"](n,11)._handleInputEvent(e.target.value)&&o),o},u.mb,u.r)),t["\u0275did"](11,16384,null,0,s.TextValueAccessor,[t.ElementRef],null,null),t["\u0275prd"](1024,null,r.NG_VALUE_ACCESSOR,function(n){return[n]},[s.TextValueAccessor]),t["\u0275did"](13,671744,null,0,r.FormControlName,[[3,r.ControlContainer],[8,null],[8,null],[6,r.NG_VALUE_ACCESSOR],[2,r["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,r.NgControl,null,[r.FormControlName]),t["\u0275did"](15,16384,null,0,r.NgControlStatus,[[4,r.NgControl]],null,null),t["\u0275did"](16,49152,null,0,s.IonInput,[t.ChangeDetectorRef,t.ElementRef],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),t["\u0275eld"](17,0,null,null,4,"div",[["class","img-show-oldpassword"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.changetype(1)&&t),t},null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](19,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](21,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](22,0,null,null,11,"ion-item",[["style","background-color: initial;;width:88%"]],null,null,null,u.rb,u.s)),t["\u0275did"](23,49152,null,0,s.IonItem,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](24,0,null,0,2,"ion-label",[["position","floating"],["style","font-size:14px"]],null,null,null,u.sb,u.x)),t["\u0275did"](25,49152,null,0,s.IonLabel,[t.ChangeDetectorRef,t.ElementRef],{position:[0,"position"]},null),(n()(),t["\u0275ted"](-1,0,["M\u1eadt kh\u1ea9u m\u1edbi"])),(n()(),t["\u0275eld"](27,0,null,0,6,"ion-input",[["clearInput",""],["formControlName","newpassword"],["id","newpassword"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0;return"ionBlur"===l&&(o=!1!==t["\u0275nov"](n,28)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t["\u0275nov"](n,28)._handleInputEvent(e.target.value)&&o),o},u.mb,u.r)),t["\u0275did"](28,16384,null,0,s.TextValueAccessor,[t.ElementRef],null,null),t["\u0275prd"](1024,null,r.NG_VALUE_ACCESSOR,function(n){return[n]},[s.TextValueAccessor]),t["\u0275did"](30,671744,null,0,r.FormControlName,[[3,r.ControlContainer],[8,null],[8,null],[6,r.NG_VALUE_ACCESSOR],[2,r["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,r.NgControl,null,[r.FormControlName]),t["\u0275did"](32,16384,null,0,r.NgControlStatus,[[4,r.NgControl]],null,null),t["\u0275did"](33,49152,null,0,s.IonInput,[t.ChangeDetectorRef,t.ElementRef],{clearInput:[0,"clearInput"],type:[1,"type"]},null),(n()(),t["\u0275eld"](34,0,null,null,4,"div",[["class","img-show-newpassword"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.changetype(2)&&t),t},null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,_)),t["\u0275did"](36,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](38,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.userProfileData),n(l,8,0,"floating"),n(l,13,0,"oldpassword"),n(l,16,0,"",e.inputtype),n(l,19,0,"text"==e.inputtype),n(l,21,0,"text"!=e.inputtype),n(l,25,0,"floating"),n(l,30,0,"newpassword"),n(l,33,0,"",e.inputtypenew),n(l,36,0,"text"==e.inputtypenew),n(l,38,0,"text"!=e.inputtypenew)},function(n,l){n(l,0,0,t["\u0275nov"](l,4).ngClassUntouched,t["\u0275nov"](l,4).ngClassTouched,t["\u0275nov"](l,4).ngClassPristine,t["\u0275nov"](l,4).ngClassDirty,t["\u0275nov"](l,4).ngClassValid,t["\u0275nov"](l,4).ngClassInvalid,t["\u0275nov"](l,4).ngClassPending),n(l,10,0,t["\u0275nov"](l,15).ngClassUntouched,t["\u0275nov"](l,15).ngClassTouched,t["\u0275nov"](l,15).ngClassPristine,t["\u0275nov"](l,15).ngClassDirty,t["\u0275nov"](l,15).ngClassValid,t["\u0275nov"](l,15).ngClassInvalid,t["\u0275nov"](l,15).ngClassPending),n(l,27,0,t["\u0275nov"](l,32).ngClassUntouched,t["\u0275nov"](l,32).ngClassTouched,t["\u0275nov"](l,32).ngClassPristine,t["\u0275nov"](l,32).ngClassDirty,t["\u0275nov"](l,32).ngClassValid,t["\u0275nov"](l,32).ngClassInvalid,t["\u0275nov"](l,32).ngClassPending)})}function R(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,11,"ion-header",[],null,null,null,u.ib,u.n)),t["\u0275did"](1,49152,null,0,s.IonHeader,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](2,0,null,0,9,"ion-row",[],null,null,null,u.Ab,u.F)),t["\u0275did"](3,49152,null,0,s.IonRow,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](4,0,null,0,7,"ion-col",[["style","text-align: center;height: 56px;margin-bottom: 4px;"]],null,null,null,u.db,u.i)),t["\u0275did"](5,49152,null,0,s.IonCol,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275eld"](6,0,null,0,5,"div",[["style","align-self: center"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,1,"div",[["style","position: absolute;height: 48px;width: 48px;align-self: center;"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.goback()&&t),t},null,null)),(n()(),t["\u0275eld"](8,0,null,null,0,"img",[["src","./assets/imgs/ios-arrow-round-back.svg"],["style","height: 48px; padding: 8px;margin-top: 0px;margin-left:-14px; top:2px"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,2,"div",[["style","padding-top: 10px;font-size: 20px;font-weight: bold;"]],null,null,null,null,null)),(n()(),t["\u0275eld"](10,0,null,null,1,"label",[["class","text-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["\u0110\u1ed5i m\u1eadt kh\u1ea9u"])),(n()(),t["\u0275eld"](12,0,null,null,6,"ion-content",[["class","content-changepass"]],null,null,null,u.eb,u.j)),t["\u0275did"](13,49152,null,0,s.IonContent,[t.ChangeDetectorRef,t.ElementRef],null,null),(n()(),t["\u0275and"](16777216,null,0,1,null,I)),t["\u0275did"](15,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](16,0,null,0,2,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](17,0,null,null,1,"button",[["class","button btn-changepass"],["ion-button",""],["outline",""],["round",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.saveChange()&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,["\u0110\u1ed5i m\u1eadt kh\u1ea9u"]))],function(n,l){n(l,15,0,l.component.userProfileData)},null)}function x(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-userchangepassword",[],null,null,null,R,w)),t["\u0275did"](1,114688,null,0,f,[s.NavController,s.ToastController,t.NgZone,v.b,s.AlertController,r.FormBuilder,s.ActionSheetController,s.Platform,m.f,c.b,C.a],null,null)],function(n,l){n(l,1,0)},null)}var N=t["\u0275ccf"]("app-userchangepassword",f,x,{},{},[]);e.d(l,"UserChangePasswordPageModuleNgFactory",function(){return D});var D=t["\u0275cmf"](o,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[a.a,N]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,i.NgLocalization,i.NgLocaleLocalization,[t.LOCALE_ID,[2,i["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,r["\u0275angular_packages_forms_forms_j"],r["\u0275angular_packages_forms_forms_j"],[]),t["\u0275mpd"](4608,r.FormBuilder,r.FormBuilder,[]),t["\u0275mpd"](4608,s.AngularDelegate,s.AngularDelegate,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,s.ModalController,s.ModalController,[s.AngularDelegate,t.ComponentFactoryResolver,t.Injector,i.DOCUMENT]),t["\u0275mpd"](4608,s.PopoverController,s.PopoverController,[s.AngularDelegate,t.ComponentFactoryResolver,t.Injector,i.DOCUMENT]),t["\u0275mpd"](1073742336,i.CommonModule,i.CommonModule,[]),t["\u0275mpd"](1073742336,r["\u0275angular_packages_forms_forms_bc"],r["\u0275angular_packages_forms_forms_bc"],[]),t["\u0275mpd"](1073742336,r.FormsModule,r.FormsModule,[]),t["\u0275mpd"](1073742336,r.ReactiveFormsModule,r.ReactiveFormsModule,[]),t["\u0275mpd"](1073742336,s.IonicModule,s.IonicModule,[]),t["\u0275mpd"](1073742336,C.p,C.p,[[2,C.v],[2,C.n]]),t["\u0275mpd"](1073742336,o,o,[]),t["\u0275mpd"](1024,C.l,function(){return[[{path:"",component:f}]]},[])])})}}]);